{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "Website project for M/S Atik Auto Rice Mills: build a unique modern website using www.atikautoricemills.com as a reference/source of information, and include an admin panel (CMS) to edit/modify all site content.",
  "architectural_notes": [
    "Content should be manageable via an admin panel (CMS) with ability to edit/modify all site content.",
    "Decision: if no admin is configured in the canister, the first Internet Identity principal to log in will be auto-assigned as admin (bootstrap admin).",
    "Add an explicit Logout action in the frontend that ends the Internet Identity session (e.g., via useInternetIdentity().logout()) so users can re-authenticate and trigger first-login admin bootstrap when applicable.",
    "Requested change: replace/admin panel login mechanism with a basic username/password credential (admin/admin) instead of Internet Identity."
  ],
  "known_issues": [
    "Admin panel access denied: current Internet Identity principal not recognized as admin; backend appears to have no admin configured / access-control list missing, blocking all admin access.",
    "Build/deploy automation failed to apply the intended backend update (\"AI couldn't complete your request\").",
    "No logout option in the UI, preventing users from ending their Internet Identity session and re-authenticating to trigger the first-login admin bootstrap flow.",
    "Password-based admin login (admin/admin) still results in \"Unauthorized: Only admins can assign user roles\" after submitting credentials; login session/token is not being recognized/applied and the admin panel continues to behave as if not logged in (old admin-check logic still active or session not persisted).",
    "After submitting admin credentials, UI remains stuck on the login page and does not navigate/open the admin panel (login success state/session not applied or routing not triggered).",
    "Admin panel navigation items (Site Settings, Page Sections, Products, Gallery, Contact Info, Messages) lead to \"Not Found\"—admin sub-routes are missing/misconfigured or routing/basePath is incorrect in production build.",
    "adminLogin calls are failing with IC0508 (reject code 5) because the backend canister (ry7no-ryaaa-aaaag-aww3q-cai) is stopped, causing replica rejection errors."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-unique-modern-marketing-website-for-m-s-atik-auto-rice-mills-in-english-using-www-atikautoricemills-com-as-the-source-of-factual-business-information-company-overview-products-services-contact-details-and-any-publicly-listed-media-but-with-an-original-layout-and-styling-do-not-clone-the-existing-site",
      "title": "Create a unique, modern marketing website for “M/S Atik Auto Rice Mills” in English, using www.atikautoricemills.com as the source of factual business information (company overview, products/services, contact details, and any publicly listed media), but with an original layout and styling (do not clone the existing site).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-core-public-pages-and-navigation-home-about-products-services-gallery-and-contact-plus-footer-with-key-business-details",
      "title": "Implement core public pages and navigation: Home, About, Products/Services, Gallery, and Contact (plus footer with key business details).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-consistent-distinctive-visual-theme-colors-typography-spacing-and-component-styling-appropriate-for-a-rice-mill-industrial-agriculture-business-apply-it-across-all-public-pages-and-the-admin-panel",
      "title": "Add a consistent, distinctive visual theme (colors, typography, spacing, and component styling) appropriate for a rice mill/industrial-agriculture business; apply it across all public pages and the admin panel.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-use-a-small-set-of-custom-static-brand-images-logo-hero-section-accents-and-integrate-them-as-static-assets-in-the-frontend-do-not-serve-images-from-the-backend",
      "title": "Generate and use a small set of custom static brand images (logo, hero, section accents) and integrate them as static assets in the frontend (do not serve images from the backend).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-admin-panel-that-allows-editing-and-modifying-all-website-content-from-a-single-place-including-page-sections-product-service-items-gallery-items-and-contact-information",
      "title": "Implement an admin panel that allows editing and modifying all website content from a single place, including page sections, product/service items, gallery items, and contact information.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-authentication-for-the-admin-panel-using-internet-identity-and-restrict-admin-routes-actions-to-authenticated-administrators-only",
      "title": "Add authentication for the admin panel using Internet Identity and restrict admin routes/actions to authenticated administrators only.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-a-content-initialization-capability-seed-the-cms-with-initial-content-derived-from-www-atikautoricemills-com-so-the-new-site-is-not-empty-on-first-load",
      "title": "Provide a “Content Initialization” capability: seed the CMS with initial content derived from www.atikautoricemills.com so the new site is not empty on first load.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-build-admin-panel-ux-a-dashboard-with-left-side-navigation-per-page-editors-section-title-body-cta-fields-and-list-editors-for-products-services-and-gallery-add-edit-remove-re-order-publish-unpublish",
      "title": "Build admin panel UX: a dashboard with left-side navigation, per-page editors (section title/body/CTA fields), and list editors for Products/Services and Gallery (add/edit/remove, re-order, publish/unpublish).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-basic-media-management-for-the-gallery-store-image-references-in-the-cms-and-allow-admins-to-add-remove-gallery-items-with-title-caption-and-image-url-path-using-static-assets-or-external-urls",
      "title": "Add basic media management for the Gallery: store image references in the CMS and allow admins to add/remove gallery items with title/caption and image URL/path (using static assets or external URLs).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-contact-page-with-editable-contact-details-and-a-frontend-contact-form-that-does-not-require-email-sms-integration-store-submitted-messages-in-the-backend-for-admins-to-review-in-the-admin-panel",
      "title": "Implement a Contact page with editable contact details and a frontend contact form that does not require email/SMS integration; store submitted messages in the backend for admins to review in the admin panel.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-use-react-query-for-data-fetching-caching-and-provide-loading-error-states-for-both-public-pages-and-admin-operations",
      "title": "Use React Query for data fetching/caching and provide loading/error states for both public pages and admin operations.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-logout-action-to-the-public-site-header-navigation-that-is-visible-only-when-the-user-is-authenticated-with-internet-identity-and-that-logs-the-user-out-by-calling-the-existing-internet-identity-hook-logout-clear-function-and-clearing-any-client-side-cached-data-as-needed",
      "title": "Add a Logout action to the public site header navigation that is visible only when the user is authenticated with Internet Identity, and that logs the user out by calling the existing Internet Identity hook logout/clear function and clearing any client-side cached data as needed.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-logout-action-to-the-admin-access-denied-screen-so-a-logged-in-but-non-admin-user-can-log-out-and-log-back-in-to-trigger-the-first-login-admin-bootstrap-flow",
      "title": "Add a Logout action to the admin access denied screen so a logged-in (but non-admin) user can log out and log back in to trigger the first-login admin bootstrap flow.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-admin-panel-authentication-flow-internet-identity-with-a-basic-username-password-login-that-grants-access-when-username-is-exactly-admin-and-password-is-exactly-admin",
      "title": "Replace the current admin-panel authentication flow (Internet Identity) with a basic username/password login that grants access when username is exactly \"admin\" and password is exactly \"admin\".",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-admin-routing-and-logout-behavior-to-use-the-new-password-session-mechanism-not-internet-identity-for-determining-whether-the-admin-panel-is-accessible-and-to-support-logging-out-by-clearing-the-stored-admin-session-token-and-react-query-caches",
      "title": "Update frontend admin routing and logout behavior to use the new password-session mechanism (not Internet Identity) for determining whether the admin panel is accessible, and to support logging out by clearing the stored admin session token and React Query caches.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-admin-panel-data-operations-to-include-the-admin-session-token-when-calling-backend-admin-only-methods-without-changing-the-behavior-of-public-non-admin-pages",
      "title": "Update all admin-panel data operations to include the admin session token when calling backend admin-only methods, without changing the behavior of public (non-admin) pages.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-admin-session-handling-to-store-an-admin-session-token-not-a-boolean-flag-in-sessionstorage-and-clear-it-on-logout",
      "title": "Update the frontend admin session handling to store an admin session token (not a boolean flag) in sessionStorage and clear it on logout.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-update-admin-route-gating-so-the-admin-panel-is-accessible-when-and-only-when-a-valid-admin-session-token-exists-validates-prevent-the-ui-from-falling-back-to-the-old-role-based-admin-check-that-causes-repeated-enter-your-credentials-unauthorized-errors",
      "title": "Update admin route gating so the admin panel is accessible when (and only when) a valid admin session token exists/validates; prevent the UI from falling back to the old role-based admin check that causes repeated \"Enter your credentials\" + unauthorized errors.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-admin-panel-data-operations-to-include-the-admin-session-token-in-backend-calls-for-admin-only-methods-so-admin-crud-actions-work-immediately-after-login",
      "title": "Update all admin-panel data operations to include the admin session token in backend calls for admin-only methods, so admin CRUD actions work immediately after login.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-login-success-flow-so-that-submitting-username-admin-and-password-admin-reliably-stores-a-valid-non-empty-admin-session-token-as-a-string-in-sessionstorage-and-the-admin-route-renders-the-admin-panel-adminlayout-instead-of-remaining-on-the-login-screen",
      "title": "Fix the admin login success flow so that submitting username \"admin\" and password \"admin\" reliably stores a valid non-empty admin session token as a string in sessionStorage and the /admin route renders the admin panel (AdminLayout) instead of remaining on the login screen.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-admin-login-mutation-to-correctly-handle-the-backend-s-optional-return-type-from-adminlogin-motoko-text-as-represented-in-the-generated-js-ts-bindings-treating-the-empty-optional-as-invalid-credentials-and-extracting-the-text-value-when-present",
      "title": "Update the frontend admin login mutation to correctly handle the backend’s optional return type from adminLogin (Motoko ?Text) as represented in the generated JS/TS bindings, treating the empty optional as invalid credentials and extracting the text value when present.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-admin-route-gating-so-it-never-attempts-token-validation-calls-with-a-non-string-or-empty-string-token-and-it-does-not-get-stuck-in-a-state-where-a-falsy-invalid-token-prevents-navigation-to-the-admin-panel-after-a-successful-credential-submission",
      "title": "Harden admin route gating so it never attempts token validation calls with a non-string or empty-string token, and it does not get stuck in a state where a falsy/invalid token prevents navigation to the admin panel after a successful credential submission.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-admin-panel-routing-so-the-sidebar-links-for-site-settings-page-sections-products-gallery-contact-info-and-messages-resolve-to-real-routes-instead-of-a-not-found-page-including-when-the-user-refreshes-the-browser-on-those-urls",
      "title": "Fix admin panel routing so the sidebar links for “Site Settings”, “Page Sections”, “Products”, “Gallery”, “Contact Info”, and “Messages” resolve to real routes instead of a Not Found page (including when the user refreshes the browser on those URLs).",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-panel-has-a-clear-not-found-fallback-within-the-admin-area-for-unknown-admin-paths-under-admin-e-g-admin-unknown-that-displays-a-user-friendly-english-message-and-a-link-back-to-the-admin-dashboard",
      "title": "Ensure the admin panel has a clear Not Found fallback *within the admin area* for unknown admin paths under /admin (e.g., /admin/unknown) that displays a user-friendly English message and a link back to the Admin Dashboard.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-when-backend-calls-fail-with-replica-rejection-error-ic0508-reject-code-5-indicating-the-backend-canister-is-stopped-e-g-canister-id-ry7no-ryaaa-aaaag-aww3q-cai-display-a-clear-english-error-message-in-the-admin-login-ui-instead-of-a-generic-error-and-do-not-crash-or-leave-the-ui-in-an-indefinite-loading-state",
      "title": "When backend calls fail with replica rejection error IC0508 (reject code 5) indicating the backend canister is stopped (e.g., canister ID ry7no-ryaaa-aaaag-aww3q-cai), display a clear English error message in the Admin Login UI instead of a generic error, and do not crash or leave the UI in an indefinite loading state.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-admin-route-gating-token-validation-error-handling-to-recognize-ic0508-canister-is-stopped-errors-and-present-an-english-sessionerror-message-that-indicates-the-admin-panel-backend-is-unavailable-without-incorrectly-clearing-a-valid-session-token-solely-due-to-the-canister-stopped-condition",
      "title": "Update admin route gating token-validation error handling to recognize IC0508/“canister is stopped” errors and present an English sessionError message that indicates the admin panel backend is unavailable, without incorrectly clearing a valid session token solely due to the canister-stopped condition.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-standardize-extraction-of-replica-rejection-details-error-code-reject-code-reject-message-from-thrown-errors-for-display-in-user-friendly-english-messages-and-ensure-user-facing-text-remains-english-across-admin-authentication-error-states",
      "title": "Standardize extraction of replica rejection details (error_code, reject_code, reject_message) from thrown errors for display in user-friendly English messages, and ensure user-facing text remains English across admin authentication error states.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a unique modern website for M/S Atik Auto Rice Mills using www.atikautoricemills.com as reference/source of information",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Build a full admin panel/CMS to edit and modify all website content",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Create a CMS data model in the Motoko single-actor backend to store all editable content (site settings, pages/sections, products/services, gallery, contact info) with stable storage so content persists across canister upgrades.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Update the backend authorization bootstrap so that when the canister has no administrators configured, the first authenticated Internet Identity principal to reach the admin-check/authenticated admin flow is automatically granted admin privileges (and any required user privileges) so the admin panel is no longer permanently locked.",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Ensure the initial admin bootstrap state persists across canister upgrades so that upgrading the canister does not reset the admin list back to empty and re-trigger first-login takeover.",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Add a Logout button/action in the UI for Internet Identity auth so users can end their session (e.g., call useInternetIdentity().logout()) and re-authenticate to trigger admin bootstrap when needed.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Change admin authentication from Internet Identity to a basic username/password login (admin/admin) for accessing the admin panel",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Implement backend support for password-based admin authentication by adding a login method that validates the submitted username/password (admin/admin) and issues an admin session token that can be used to authorize subsequent admin operations.",
      "reqIds": [
        "REQ-18"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Fix backend password-based admin login so submitting username \"admin\" and password \"admin\" successfully authenticates without triggering the authorization error \"Unauthorized: Only admins can assign user roles\".",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Implement a backend-issued admin session token for the password login flow and use that token (not Internet Identity roles) to authorize all admin-only CMS operations.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "M/S Atik Auto Rice Mills",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}